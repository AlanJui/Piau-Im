# URS-480 漢字標音檔

為求保存《文章》之河洛話（亦稱：閩南話）的漢字讀音，目前我先用 Excel 檔案的【漢字注音】工作表，記錄其讀音。
文章完成漢字標音後，希望日後亦能以人工目識，瀏覽檔案內容。故而制定《漢字標音檔》格式

上述記錄【漢字標音】用之 Excel 檔案，具以下特性：

- 【漢字】標音編碼：採用【台語音標】改良版（簡稱：TLPA+）；
- 【漢字注音】工作表：工作表格式，及其中【儲存格】之功能特性，說明於「【漢字注音】工作表」章節；
- 【env】工作表：為求系統之應用更具彈性，系統作業可用【選項】控制，可供使用者擇用之【選項】存於【env】工作表；
- 【漢字標音檔】格式：檔案屬【文字檔】類型（可用：【記事本】App 檢視），細節說明請詳「【漢字標音檔】格式」章節。


## 【台語標音】改良版（TLPA+）簡介

台語音標改良版幾乎等同原版，不同處僅兩點：

|序號|台語音標原版(TLPA)|台語音標改良版(TLPA+)|
|----|---------|-----------|
| 1 |c  | z |
| 2 |ch | c |

簡單解說【TLPA+】：它令標音系統中使用【聲母】完成單一字母化，不會出現如：ch，使用兩個拼音字母之狀況；
這對閱讀之視覺感受及程式編碼控制均較優。

## 【漢字注音】工作表

參考如下【附表1】，可知：

- 【漢字】儲存格位址：在於【欄位址】--【D欄】（欄號：4）至【R欄】（欄號：18）；【列位址】-- 5, 9, 13 , 17, ...列。
- 【台語音標】儲存格位址：欄位址同【漢字】；【列位址】-- 4, 8, 12, 16, ...
- 【人工標音】儲存格位址：欄位址同【漢字】；【列位址】-- 3, 7, 11, 15, ...
- 【漢字標音】儲存格位址：欄位址同【漢字】；【列位址】-- 6, 10, 14, 18, ...

綜合上述可知，只要得【漢字】之【儲存格位址】，便能依轉換後的【座標位址】，找到【漢字】的【台語音標】、【漢字標音】及【人工標音】。

例如：漢字【春】置於【5D】儲存格位址，則可推算出【座標位址】為：（5, 4）。

- 求【人工標音】座標 = (5 - 2, 4)
- 求【台語音標】座標 = (5 - 1, 4)
- 求【漢字標音】座標 = (5 + 1, 4)

每個【漢字】相關的【台語音標】、【漢字標音】、【人工標音】各儲存格，其【功用】說明如下：

- 台語音標：本系統會以程式，自【漢字標音】資料庫查詢【漢字】之【台羅音標】；經程式轉換成【台語音標】然後填入。
- 人工標音：當【漢字標音】資料尚未登錄某漢字之【台羂音標】，使用者可人工手動，以【台語音標】填入於此。
- 漢字標音：因【河洛話】的標音系統諸多：十五音、白話字（POJ）、閩拼方案（BP）、台語音標（TLPA）、台羅音標（TL）...，系統可依使用者之設定，以程式自動轉換其慣用之【標音系統】，然後儲放於此儲存格。

【附表1】：【漢字注音】工作表格式

```md
| 2 | 3 | 4    | 5      | 6     | 7    | 8     | 9 | 10   | 11   | 12    | 13   | 14    | 15 | 16 | 17 | 18 |
|---|---|------|--------|-------|------|-------|---|------|------|-------|------|-------|----|----|----|----|
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      | cun1   | hiau2 |      |       |   |      |      |       |      |       |    |    |    |    |
| 1 |   | 《    | 春      | 曉     | 》    |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      | cun1   | hiao3 |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
| 2 |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   | cun1 | bian5  | put4  | kak4 | hiau2 |   | cu2  | cu2  | bun5  | the5 | ziau2 |    |    |    |    |
| 3 |   | 春    | 眠      | 不     | 覺    | 曉     | ， | 處    | 處    | 聞     | 啼    | 鳥     | 。  |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   | cun1 | bbian2 | but7  | gak7 | hiao3 |   | cu3  | cu3  | bbun2 | te2  | ziao3 |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
| 4 |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   | ia7  | lai5   | hong1 | u2   | sing1 |   | hua1 | lok8 | ti1   | to1  | siau2 |    |    |    |    |
| 5 |   | 夜    | 來      | 風     | 雨    | 聲     | ， | 花    | 落    | 知     | 多    | 少     | ？  | φ  |    |    |
|   |   | ia6  | lai2   | hong1 | u3   | sing1 |   | hua1 | lok8 | di1   | do1  | siao3 |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
|   |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
| 6 |   |      |        |       |      |       |   |      |      |       |      |       |    |    |    |    |
---

## env 工作表

由於使用者的【應用需求】眾多，且亦隨時變更。故系統之設計，儘可能不將程式碼寫死，能以【參數】觀點滿足
千變萬化之種需求。系統提供予使用者之【應用需求】選項，透過【env工作表】供使用者選擇。

【附表2】：env 工作表格式


```md
|  |  |
|---|---|
| 格式版本 | 1 |
| 文件版本 | 0.1 |
| FILE\_NAME | Tai\_Gi\_Zu\_Im\_Bun\.xlsx |
| TITLE | 《般若波羅蜜多心經》 |
| IMAGE\_URL | https://img\.shoplineapp\.com/media/image\_clips/5ced0f1bd62fc3392bb34287/original\.jpg?1559039769 |
| OUTPUT\_PATH | output7 |
| 章節序號 | 1 |
| 顯示注音輸入 | TRUE |
| 每頁總列數 | 60 |
| 每列總字數 | 15 |
| 語音類型 | 文讀音 |
| 漢字庫 | 河洛話 |
| 標音方法 | 閩拼調號 |
| 網頁格式 | 無預設 |
| 標音方式 | 上及右 |
| 上邊標音 | 閩拼調符 |
| 右邊標音 | 閩拼調符 |
| 網頁每列字數 | 預設 |
```

## 【漢字標音檔】格式

1. 檔案類型需為【文字檔】格式，以便可以人工目識瀏覽檔案內容：

2. 【漢字標音檔】格式設計採用 JSONC 檔為基礎，檔案格式如下：
   檔案內容分： head 與 body 兩部份。
   - 檔頭(head)：存放【env工作表】之各項【應用需求】選項；
   - 檔體(body)：存放整篇【文章】之【漢字】及【漢字標音】；且亦包含沒有【漢字標音】資料的【標點符號】。

### 【附件4】漢字標音檔格式

```json
{
    "head": {
        "格式版本": 1,
        "文件版本": "0.0.0.1",
        "FILE_NAME": "Tai_Gi_Zu_Im_Bun.xlsx",
        "TITLE": "《般若波羅蜜多心經》",
        "IMAGE_URL": "https://img.shoplineapp.com/media/image_clips/5ced0f1bd62fc3392bb34287/original.jpg?1559039769",
        "OUTPUT_PATH": "output7",
        "章節序號": 1,
        "顯示注音輸入": true,
        "每頁總列數": 60,
        "每列總字數": 15,
        "語音類型": "文讀音",
        "漢字庫": "河洛話",
        "標音方法": "閩拼調號",
        "網頁格式": "無預設",
        "標音方式": "上及右",
        "上邊標音": "閩拼調符",
        "右邊標音": "閩拼調符",
        "網頁每列字數": "預設"
    },
    "body": {
        // "【漢字/標點符號/換行/文章終止符號】" : [ "【台語音標】", "【人工標章】", "【漢字標音】" ]
        "《" : [],
        "春" : ["cun1", "", ""],
        "曉" : ["hiau2", "", ""],
        "》" : [],
        "，" : [],
        "春" : ["cun1", "", ""],
        "眠" : ["bian5", "", ""],
        "不" : ["put4", "", ""],
        "覺" : ["kak4", "", ""],
        "曉" : ["hiau2", "", ""],
        "，" : [],
        "處" : ["cu2", "", ""],
        "處" : ["cu2", "", ""],
        "聞" : ["bun5", "", ""],
        "啼" : ["the5", "", ""],
        "鳥" : ["ziau2", "", ""],
        "。" : [],
        // 換行
        "\n" : [],
        "夜" : ["ia7", "", ""],
        "來" : ["lai5", "", ""],
        "風" : ["hong1", "", ""],
        "雨" : ["u2", "", ""],
        "聲" : ["sing1", "", ""],
        "，" : [],
        "花" : ["hua1", "", ""],
        "落" : ["lok8", "", ""],
        "知" : ["ti1", "", ""],
        "多" : ["to1", "", ""],
        "少" : ["siau2", "", ""],
        "？" : ["", "", ""],
        // 文章終止符號
        "φ " : [],
    }
}
```

## 【漢字標音檔】轉換

系統功能：【漢字標音檔匯出/匯入作業】。

功能需求描述：

1. 漢字標音檔匯出作業

自 Excel 檔案匯出【env】、【漢字注音】工作表內容，存檔成：【漢字標音檔】（文字檔）格式。

2. 漢字標音檔匯入作業

自【漢字標音檔】（文字檔）匯入內容，填入 Excel 檔案之【env】、【漢字注音】工作表。
